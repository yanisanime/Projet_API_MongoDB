<!DOCTYPE html>
<html>
<head>
  <title>Détails de la Tâche</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <h1>Détails de la Tâche</h1>
  <div class="task-detail">
    <h2><%= task.titre %></h2>
    <p><strong>Description:</strong> <%= task.description %></p>
    <p><strong>Échéance:</strong> <%= new Date(task.echeance).toLocaleDateString() %></p>
    <p><strong>Statut:</strong> <%= task.statut %></p>
    <p><strong>Priorité:</strong> <%= task.priorite %></p>
    <p><strong>Catégorie:</strong> <%= task.categorie %></p>
    
    <h3>Sous-tâches :</h3>
    <% if (task.sousTaches && task.sousTaches.length > 0) { %>
      <ul>
        <% task.sousTaches.forEach(sousTache => { %>
          <li><%= sousTache.titre %> - <%= sousTache.statut %> (Échéance : <%= new Date(sousTache.echeance).toLocaleDateString() %>)</li>
        <% }) %>
      </ul>
    <% } else { %>
      <p>Aucune sous-tâche.</p>
    <% } %>

    <h3>Commentaires :</h3>
    <% if (task.commentaires && task.commentaires.length > 0) { %>
      <ul>
        <% task.commentaires.forEach(commentaire => { %>
          <li><strong><%= commentaire.auteur %> :</strong> <%= commentaire.contenu %> <em>(<%= new Date(commentaire.date).toLocaleDateString() %>)</em></li>
        <% }) %>
      </ul>
    <% } else { %>
      <p>Aucun commentaire.</p>
    <% } %>

    <button onclick="location.href='/'">Retour à la liste</button>
  </div>
</body>
</html>
